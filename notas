Entrega 3/12/2025
Banco Riendo es el cliente
Script de Bash
Crea usuarios contenidos en un archivo pasado como parámetro
El archivo tiene:
•	Shell por defecto
•	Directorio home
•	Comentario
•	Si se crea o no el directorio home en caso de no existir (booleano)
Opciones del script: 
•	Informar el resultado de la creación para cada usuario
•	Crear los usuarios con una contraseña pasada como parámetro de la opción

Forma del script: 
ej1_crea_usuarios.sh [-i] [-c contraseña ] Archivo_con_los_usuarios_a_crear
En caso de faltar opciones en el archivo, se deben usar los defaults del comando useradd o los que se definan como predeterminados. 
Archivo de usuarios: 
la información será separada por ":" t tiene una sintaxis como sigue. 
Nombre de usuario: Comentario: Directorio home: crear dir home si no existe (SI/NO): Shell por defecto
Opciones: 
-i despliega información para cada usuario a crear. Debe desplegar la creación o intento. Al final se despliega una línea en blanco y el total de usuarios creados con éxito. 
-c seguido de texto que se considerará la contraseña. Si no se usa esta opción, el usuario se crea sin contraseña. Se usa el predeterminado de useradd. 
Errores: 
0 - éxito
1 - archivo inexistente
2 - archivo no regular 
3 - no hay permisos de lectura sobre el archivo
4 - sintaxis incorrecta en el archivo (formato)
5 - parámetros incorrectos (ej -c sin contraseña)
6 - modificadores inválidos (no son "i" o "c")
7 - cantidad de parámetros incorrectos
Lógica: 
Control de errores 
En caso de estar todo bien, almacenar los parámetros de opciones como variables y crear los usuarios correspondientes de acuerdo a las opciones

Comandos relevantes: 
useradd
opciones: 
-c. --comment : comentario en forma de string
-d, --home : directorio home del usuario
-m, --create-home : crear el directio home si no existe
-M : no crear el directorio home
-p, --password : password encriptada
-s, --shell : Shell del usuario
userdel
-r, --remove : borra directorio home y todos los archivos dentro del mismo
Z, --selinux-user :  borra mapeos de Selinux para el usuario

cut
-d, --delimiter : separador de campos
-f, --fields : campos a seleccionar

archivos relevantes: passwd  ?
caso de no error: 
variables 
contrasena_sin_encriptar
contrasena_encriptada

caso sin opciones: 
Nombre de usuario: Comentario: Directorio home: crear dir home si no existe (SI/NO): Shell por defecto
•	useradd -c comentario -d directorio_home -m/-M nombre 
comentario : CREATE_HOME en /etc/login.defs puede estar en no, en ese caso no se crea el directorio home. En caso no estarlo, por defecto se crea. Si está en yes, también se crea. -m y -M pasan por arriba de esta opción. 

Nombre de usuario: Comentario: Directorio home: crear dir home si no existe (SI/NO): Shell por defecto
  1 #Nombre de usuario: Comentario: Directorio home: crear dir home si no existe (SI/NO): Shell por defecto
  2 linea=$1
  3 nombre_de_usuario= cut -d":" -f1 $linea
  4 comentario= cut -d":" -f2 $linea
  5 directorio_home= cut -d":" -f3 $linea
  6 crear_home= cut -d":" -f4 $linea
  7 shell_predeterminada= cut -d":" -f5 $linea
  8 
  9 echo $nombre_de_usuario
 10 echo $comentario
 11 echo $directorio_home
 12 echo $crear_home
 13 echo $shell_predeterminada
no importan los espacios antes de las opciones porque useradd se los va a comer
Usernames may contain only lower and upper case letters, digits, underscores, or dashes. They can end with a dollar sign. Dashes are not allowed at the beginning of the username. Fully numeric usernames and usernames . or .. are also disallowed. It is not recommended to use usernames beginning with . character as their home directories will be hidden in the ls output.
Usernames may only be up to 32 characters long.
para sanitizar las opciones podemos usar expresiones regulares
https://regex101.com/
https://access.redhat.com/solutions/3103631
[a-zA-Z0-9_.][a-zA-Z0-9_.-]*[$]?
^[^-A-Z

